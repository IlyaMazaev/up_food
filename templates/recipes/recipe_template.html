{% extends 'base.html' %}
{% load static %}
{% block content %}
    <main>
        <div class="main_class">
            <div class="title_body">
                <div class="image_class">
                    <img class="main_image"  src=https://recipes-db-api.herokuapp.com/api/images/{{ recipe.recipe.photo_address }}>
                </div>
                <div class="main_title_class">
                    <span itemprop="name">
                        <h1 class="main_title_h1">{{ recipe.recipe.name }}</h1>
                    </span>
                </div>
                {% if user.is_authenticated and disable is False %}
                    <form action="add_fav_recipe" method="GET">
                        <button type="submit" class="btn btn-default" value="{{ q }}" name="q">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-star" viewBox="0 0 16 16">
                                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                            </svg>
                        </button>
                    </form>
                {% elif disable is True and user.is_authenticated %}
                    <form action="remove_fav_recipe" method="GET">
                        <button type="submit" class="btn btn-default" value="{{ q }}" name="q">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                        </button>
                    </form>
                {% endif %}
                <div class="text_type">
                    <span class="text">
                        <span class="text">{{ recipe.recipe.types }}</span>
                    </span>
                </div>
                <div class="additional_information">
                    <span title class="text">
                        <span itemprop="portion_count">
                            <span>Порций: {{ recipe.recipe.portions }}</span>
                            <span class="clock-icon">Время: {{ recipe.recipe.time }}</span>
                        </span>
                    </span>
                </div>
            </div>
            <p></p>
            <div class="main_body">
                <div>
                    <div class="ingredients_title">
                        <h3 class="ing_title">Ингредиенты:</h3>
                    </div>
                    <div class="container rounded bg-recipe-page mt-4 pt-1">
                        {% for i in ing %}
                            <div class="recipe_ing">
                            <span title="" class="rec_ing">
                                <span itemprop="recipeIngredient">{{ i }}</span>
                            </span>
                            </div>
                        {% endfor %}

                    </div>
                    {% if user.is_authenticated %}
                        <button class="btn btn-default" onclick='location.href="/order/?q={{ recipe.recipe.id }}"'>
                            Купить продукты
                        </button>
                        <p></p>
                    {% endif %}
                </div>
                <div class="how_to_class">
                    <div class="how_to_title">
                        <h3 class="how_title">Инструкция приготовления:</h3>
                    </div>
                    <div class="container rounded bg-recipe-page mt-4 pt-1">
                        <span itemprop="text">
                            {{ recipe.recipe.how_to_cook }}
                        </span>
                        <span style="display: none">
                            рецепты
                            что приготовить
                            блюдо
                            что приготовить вкусного
                            что поесть
                            что покушать
                            вкусный рецепт
                            рецепт
                            приготавливать
                            блюдо
                            вкусный
                            поесть
                            лазанья
                            как готовить блины
                            что приготовить из фарша
                            что приготовить на обед
                            как приготовить
                            рецепты на каждый день для всей семьи простые и дешевые
                            вкусно быстро и доступно рецепты
                            рецепты на каждый день
                            блюда
                            тарелка
                        </span>
                    </div>
                </div>
                <div class="comments">
                    <div class="comments_title">
                        <h3 class="how_title">Комментарии:</h3>
                    </div>
                    {% for coms in comments %}
                        <div class="container rounded bg-recipe-page mt-4 pt-1">
                            <h4 itemprop="text">{{ coms.user.user.username }}:</h4>
                            <span itemprop="text">
                            {{ coms.comment_text }}
                        </span>
                        </div>
                    {% endfor %}
                    {% if user.is_authenticated %}
                        <div>
                            <form action="add_comment" method="GET">
                                <img src="{{ user.profile.image.url }}" width="70" height="70">
                                <textarea cols="50" maxlength="150" rows="5" name="textbox"></textarea>
                                <button type="submit" name="q" value="{{ q }}" class="btn btn-default">Отправить
                                </button>
                            </form>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </main>
{% endblock %}
